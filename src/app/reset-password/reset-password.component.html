<div class="auth-form-wrapper">
  <mat-card class="auth-form">
    <mat-card-header>
      <mat-card-title>
        <h3 i18n>Reset Password</h3>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <gt-form-error [errors]="formErrors()"></gt-form-error>
        <div class="server-error">
          <p *ngIf="success()" class="success" i18n
            >If you have an account with GlitchTip, an email has been sent</p
          >
        </div>
        <mat-form-field class="full-width" appearance="outline">
          <mat-label i18n>Email</mat-label>
          <input
            [readonly]="success()"
            matInput
            type="email"
            formControlName="email"
          />
          <mat-error *ngIf="email?.errors">
            <span *ngIf="email?.errors?.required || email?.errors?.email" i18n
              >Enter a valid email address</span
            >
            <span *ngIf="email?.errors?.serverError">
              {{ email?.errors?.serverError }}
            </span>
          </mat-error>
        </mat-form-field>
        <gt-loading-button
          class="full-width"
          buttonText="Send Reset Password Email"
          [fullWidth]="true"
          [loading]="loading()"
          [disabled]="success()"
          id="submit"
        >
        </gt-loading-button>
        <button
          *ngIf="success()"
          (click)="reset()"
          mat-stroked-button
          color="primary"
          class="reset full-width"
          type="button"
          id="reset"
          i18n
          >Reset</button
        >
      </form>
      <div class="sign-up">
        <p class="mat-body-1">
          <a routerLink="/login" i18n>Log in</a>
        </p>
        <p *ngIf="enableUserRegistration$ | async" class="mat-body-1">
          <a routerLink="/register" i18n>Register</a>
        </p>
      </div>
    </mat-card-content>
  </mat-card>
</div>
